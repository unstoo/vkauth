<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<style>
  button {
    width: 100px;
    height: 30px;
    nav-index: 1;
  }
</style>
<body>
  
  <button id="Auth_button">Auth</button>

  <script>

  var hash = location.hash;
  if(hash) {
    
    var user = {};
    hash = hash.slice(1, hash.length);    
    hash = hash.split('&');

    let key_value = [];
    keysOfInterest.forEach((value, i) => {
        key_value = value.split("=");
        user[key_value[0]] = key_value[1];
    });    

    console.log(user);
    var keysOfInterest = ['access_token', 'user_id'];
    
  }
  
  
  var button = document.getElementById("Auth_button");
  button.addEventListener("click", authHandler);

  function authHandler(e) {
    var oAuth = "https://oauth.vk.com/authorize?client_id=5885886",
        scope = "scope=wall,friends",
        redirect = `redirect_uri=unstoo.github.io/vkauth/`,
        display = "display=popup";

    oAuthWindow = window.open(
      `${oAuth}&${scope}&${redirect}&${display}&v=5.52&response_type=token`
    );

    // location = `${oAuth}&${scope}&${redirect}&${display}&v=5.52&response_type=token`;
  }
  </script>

</body>
</html>