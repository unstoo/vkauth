<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<style>
  button {
    width: 100px;
    height: 30px;
    nav-index: 1;
  }
</style>
<body>
  
  <button id="Auth_button">Auth</button>


  <script>
  var button = document.getElementById("Auth_button");

  button.addEventListener("click", authHandler);

  function authHandler(e) {
    var oAuth = "https://oauth.vk.com/authorize?client_id=5885886",
        scope = "scope=wall,friends",
        redirect = `redirect_uri=unstoo.github.io/vkauth/`,
        display = "display=popup";

    window.addEventListener("hashchange", funcRef, false);
    var funcRef = (e) => { console.log(e) };

    // oAuthWindow = window.open(
    //   `${oAuth}&${scope}&${redirect}&${display}&v=5.52&response_type=token`
    // );

    var xhr = new XMLHttpRequest();

    var body = `${oAuth}&${scope}&${redirect}&${display}&v=5.52&response_type=token`;

    xhr.open("GET", '/submit', true)
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')

    xhr.onreadystatechange = function () {
      if (this.readyState != 4) return;
      alert( this.responseText );
    };

    

    xhr.send(body);
    
     
  }
  </script>

</body>
</html>